# Наименование проекта: оптимизация маршрутов курьерской службы компании ООО “Я-доставка”
1.1 Проблема
Традиционные подходы к оптимизации маршрутов, такие как жадные алгоритмы или алгоритмы поиска кратчайшего пути на графах, неэффективны в динамично меняющихся условиях. Они либо не учитывают текущую дорожную обстановку, либо требуют перерасчета всего маршрута при каждом изменении, что приводит к задержкам и неэффективности.
Неучет текущей дорожной обстановки: Традиционные алгоритмы не могут адаптироваться к изменениям в реальном времени, таким как пробки, дорожные работы или аварии. Это может привести к тому, что оптимизированный маршрут становится неэффективным, и время в пути увеличивается.
Перерасчет маршрута: при каждом изменении условий (например, при возникновении пробки) требуется перерасчет всего маршрута. Это может занять значительное время, что приводит к задержкам и увеличению времени доставки.
Неэффективность в динамичных условиях: в условиях высокой динамики, когда информация о дорожной обстановке меняется очень быстро, традиционные алгоритмы не могут обеспечить необходимую гибкость и скорость реакции. Это может привести к ухудшению качества обслуживания и увеличению затрат на логистику.
Таким образом, для решения этих проблем необходимо внедрить более современные подходы к оптимизации маршрутов, которые учитывают динамические изменения в реальном времени и могут адаптироваться к ним без значительных задержек.
1.2 Решение
Разработать систему для оптимизации маршрутов курьеров курьерской службы “Я-доставка”. Система должна учитывать текущую ситуацию на дорогах (пробки, аварии), изменяющиеся заказы (новые, отмены, изменение приоритета) и минимизировать общее время доставки. 
1.3 Описание используемого алгоритма
В приложении используется алгоритм “Представление графа дорожной сети” пошагово просматривает все пути, ведущие от начальной вершины в конечную, пока не найдёт минимальный. Сначала он рассматривает те маршруты, которые «кажутся» ведущими к цели. 
Алгоритм основывается на двух основных компонентах:
•	Функция стоимости пути. Измеряет стоимость пути от начальной точки до текущей точки. В простейшем случае это может быть просто количество шагов или расстояние, пройденное от начальной точки до текущей. Однако в более сложных случаях функция g может учитывать различные факторы, такие как вес рёбер в графе, наличие препятствий и другие параметры.
•	Эвристическая функция. Оценивает расстояние от рассматриваемой вершины к конечной. Например, для задачи маршрутизации может представлять собой расстояние до цели по прямой линии.

 ![image](https://github.com/user-attachments/assets/8ecfb0b3-69ea-4705-a98b-12b4c5e1732d)
Рисунок 1.1 – Граф 

1.4 Навигация 
В приложении реализован единый экран управления доставкой.
На экране отображаются:
•	Кнопки выбора тестовых сценариев (различные регионы и приоритеты заказов).
•	Список активных заказов с координатами и приоритетами.
•	Поле для отображения оптимального маршрута и его протяженности.
•	Графическая карта (холст) с визуализацией склада (красный круг), точек доставки (черные круги) и маршрута (черные линии).
Пользователь может:
•	Выбрать один из готовых сценариев.
•	Добавьте заказ вручную, нажав на карту и указав приоритет.
•	Получать мгновенную визуализацию и пересчёт маршрута после любого изменения.

 ![image](https://github.com/user-attachments/assets/942c0e68-a106-4c9a-b913-936f4ed4fd1f)
Рисунок 1.2 – Экран панели управления системой.

 ![image](https://github.com/user-attachments/assets/16441659-f428-4622-a775-7e9c60d167e4)
Рисунок 1.3 – Вывод заказов в центре 

 ![image](https://github.com/user-attachments/assets/81c3db37-f043-4483-8d85-6b0d93aa6c02)
Рисунок 1.4 – Вывод заказов дальше от центра 

 ![image](https://github.com/user-attachments/assets/e60544a5-9590-4d72-ac36-439598112ec1)
Рисунок 1.5 – Вывод заказов в одном районе

 ![image](https://github.com/user-attachments/assets/6bced3e0-331a-4668-89ee-0cc44a9e5d6f)
Рисунок 1.6 – Вывод заказов в разных частях города

 ![image](https://github.com/user-attachments/assets/f3f4490f-2f98-478a-a3a6-f04955e4aef1)
Рисунок 1.7 – Вывод заказов с разным приоритетом

 ![image](https://github.com/user-attachments/assets/58710103-d02c-440a-b069-a0943735d1b6)
Рисунок 1.8 – Много заказов

 ![image](https://github.com/user-attachments/assets/a1ef9a7c-f9f6-485b-b96f-fad09261c3b6)
Рисунок 1.9 – Добавление точки и установка приоритета

 ![image](https://github.com/user-attachments/assets/e24f9e43-dc25-4e3f-ae21-3b3218ff5528)
Рисунок 1.10 – Новый граф с добавленным заказом

1.5 Блок-схема алгоритма приложения
Программа начинает работу с запуска и загрузки в память. После этого она предоставляет пользователю возможность загрузить заказы — выбрать один из готовых сценариев. Далее программа строит маршрут доставки, который на каждом шаге выбирает ближайшую ещё не посещённую точку. После построения маршрута происходит визуализация: на карте отображаются склад, точки доставки и соединяющие их линии маршрута. Затем программа переходит в режим ожидания действий пользователя. Пользователь может выбрать одно из трёх действий: добавить новый заказ, выбрать другой сценарий или выйти из программы. При добавлении заказа пользователь кликает по карте и задаёт приоритет, после чего программа пересчитывает маршрут и обновляет карту. При выборе другого сценария загружается новый набор заказов, и маршрут также пересчитывается. Если пользователь выбирает выход, программа сохраняет последний рассчитанный маршрут и завершает работу. После выполнения любого действия программа возвращается в режим ожидания, позволяя пользователю выполнять новые операции, тем самым обеспечивая цикличность работы и интерактивность приложения.

 ![image](https://github.com/user-attachments/assets/6f889cc3-602d-43ea-9ce3-45af860b4529)
Рисунок 1.11 Блок-схема алгоритма программы

1.6 Техническая документация по проекту

1.6.1 Класс GameController.cs
Наследуется от окна (WPF). Представляет собой главное окно приложения для планирования и визуализации маршрута доставки.

Поля доступа private:
activparc -	массив текущих заказов (Order[]), которые нужно доставить
hubloc -	координаты склада (GeoPoint), точка старта и возврата маршрута
delivorder -	массив идентификаторов заказов в порядке следования по маршруту
rnd -	генератор случайных чисел для вспомогательных операций

Методы доступа public
MainWindow() -	конструктор окна, инициализирует компоненты интерфейса
CreateOptimizedRoute(Order[] parcels, GeoPoint hub) -	статический метод. Строит оптимальный маршрут доставки (жадный алгоритм ближайшего соседа). Возвращает массив идентификаторов заказов в порядке следования
Valid(GeoPoint hub, Order[] parcels, int[] route, out double routeLength) -	статический метод. Проверяет корректность маршрута и вычисляет его длину


Методы доступа private
DelivScen(Func<Order[]> fetchOrders, string description) -	загружает заказы по выбранному сценарию, определяет склад, рассчитывает маршрут, обновляет интерфейс
center_Click -	обработчик кнопки выбора сценария заказов в центре
far_center_Click -	обработчик кнопки выбора сценария заказов дальше от центра
district_Click -	обработчик кнопки выбора сценария заказов в одном районе
different_parts_Click -	обработчик кнопки выбора сценария заказов в разных частях города
different_priority_Click -	обработчик кнопки выбора сценария заказов с разным приоритетом
more_orders_Click -	обработчик кнопки выбора сценария с большим количеством заказов
RefreshlistViewOrders() -	обновляет список заказов в пользовательском интерфейсе
UpdateRouteInfo() -	обновляет информацию о маршруте: длина, последовательность, отрисовка маршрута
DrawRoute() -	визуализирует склад, точки доставки и маршрут на холсте (canvas).
RouteCanvas_ NewOrder(object sender, MouseButtonEventArgs e) -	обработчик клика по карте для добавления нового заказа с приоритетом.

1.6.2 Класс OrderViewModel.cs
Наследуется от окна (WPF). Представляет собой данные заказа, которые выводятся в ListView. 

Поля доступа public
OrderNumber -	связывает номер заказа с колонкой id и выводит в ListView
Destination -	связывает координаты точек заказа и отображает в ListView 
Priority -	связывает приоритет заказа с нужной колонкой, чтобы вывести значение в колонке priority

